# HOSER Peer Review Remediation Rules

## Remediation Workflow

This system performs systematic peer review remediation for the HOSER Knowledge Distillation repository. The goal is to fix 35 implementation issues following a structured plan using GitHub MCP for tracking.

## Before Starting Work

1. Confirm GitHub MCP is available
2. Read `docs/implementation-review-remeditation/AGENT_SYSTEM_PROMPT.md`
3. Understand which phase you're working on (Phase 1, 2, or 3)
4. Verify GitHub Issues are enabled

## Workflow Constraints

### ALWAYS Do
‚úÖ Use GitHub MCP for ALL issue tracking
‚úÖ Read issue documentation before implementing
‚úÖ Validate ALL changes before closing issues
‚úÖ Update documentation with code changes
‚úÖ Commit with issue references `[Issue X.X]`
‚úÖ Work on ONE issue at a time
‚úÖ Check dependencies before starting

### NEVER Do
‚ùå Skip validation steps
‚ùå Work on blocked issues
‚ùå Close issues without validation
‚ùå Modify multiple unrelated files in one commit
‚ùå Assume fixes work without testing
‚ùå Work on multiple issues simultaneously

## GitHub MCP Usage Pattern

For EVERY issue, follow this sequence:

```python
# 1. Start
add_issue_comment(issue_num, "üìù **Status**: IN PROGRESS\n\n**Started**: [timestamp]")

# 2. Progress updates (multiple times)
add_issue_comment(issue_num, "‚úèÔ∏è **Modified** `[file]`: [summary]")

# 3. Validation
add_issue_comment(issue_num, "## Validation\n\n[detailed results with checkmarks]")

# 4. Complete
add_issue_comment(issue_num, "‚úÖ **Status**: COMPLETE\n\n[summary]")
issue_write(method="update", owner="matercomus", repo="HOSER", issue_number=issue_num, state="closed")
```

## Finding Issues

**Use search queries instead of labels**:
```python
# Find Phase 1 issues
search_issues(query='is:open "[Phase-1]" in:title repo:matercomus/HOSER')

# Find P0 Critical issues
search_issues(query='is:open "[P0]" in:title repo:matercomus/HOSER')

# Find Phase 1 P0 issues
search_issues(query='is:open "[P0][Phase-1]" in:title repo:matercomus/HOSER')
```

## Issue Title Format

All issues use this format:
```
[Priority][Phase][Feasibility] Issue X.X: Brief Title

Examples:
[P0][Phase-1][fix] Issue 1.4: JSD Binning Documentation Mismatch
[P1][Phase-2][document] Issue 2.1: No Teacher Baseline
[P0][Deferred][defer] Issue 1.1: Hyperparameter Optimization Confound
```

## Documentation Sources

- **Primary**: `docs/implementation-review-remeditation/IMPLEMENTATION_REMEDIATION_REPORT.md`
- **Reference**: `docs/implementation-review-remeditation/IMPLEMENTATION_FIXES_CHECKLIST.md`
- **Timeline**: `docs/implementation-review-remeditation/IMPLEMENTATION_ROADMAP.md`
- **Workflow**: `docs/implementation-review-remeditation/GITHUB_MCP_AGENT_GUIDE.md`
- **Quick Start**: `docs/implementation-review-remeditation/AGENT_QUICK_START.md`

## Issue Selection

**Priority order**: P0-Critical ‚Üí P1-Major ‚Üí P2-Moderate ‚Üí P3-Minor  
**Within priority**: Lower issue number first (1.1, 1.2, 1.3...)  
**Check dependencies**: Skip if blocked, document with comment  
**Strategy**: Complete one fully before starting next

## Commit Message Format

```
[Issue X.X] <type>: <brief description>

- Detailed change 1
- Detailed change 2

Addresses: Issue X.X from peer review
Status: Fixed|Mitigated|Documented
Validation: [summary]
```

**Types**: `fix`, `feat`, `docs`, `test`, `refactor`, `stat`

## Validation Requirements

Before closing ANY issue:
- [ ] ALL validation steps from documentation completed
- [ ] ALL files in "Files to Modify" updated
- [ ] Documentation matches code exactly
- [ ] Tests pass (if applicable)
- [ ] No regressions introduced
- [ ] GitHub issue has completion comment with results

## Error Handling

**If blocked by dependency**:
```python
add_issue_comment(issue_num, "‚õî **Status**: BLOCKED\n\nWaiting on Issue #X to be completed.")
# Move to next issue
```

**If validation fails**:
```python
add_issue_comment(issue_num, "‚ö†Ô∏è **Validation Failed**: [reason]\n\nRe-attempting with revised approach.")
# Re-read documentation, try alternative approach
# Do NOT close issue
```

**If unclear**:
```python
add_issue_comment(issue_num, "‚ùì **Question**: [specific question]\n\nAwaiting clarification before proceeding.")
# Wait for response
```

## Code Quality Checks

Before ANY commit:
- Code compiles/runs without errors
- Tests pass (if applicable)
- Documentation updated to match code
- No debug code or hardcoded values left in
- Changes are atomic (single logical change)
- Commit message references issue number

## Repository-Specific Rules

**HOSER Repository**:
- Never modify baseline LM-TAD code (read-only)
- Always test on BOTH Beijing and Porto datasets
- Never commit generated files (figures, results, logs)
- Always update docs when changing code
- Never change hyperparameter defaults without justification

**File Categories**:
- **Code** (`*.py`): Test + document
- **Docs** (`*.md`): Verify accuracy + links
- **Configs** (`*.yaml`): Validate + document
- **Tests** (`test_*.py`): Execute tests
- **Results** (`results/*.md`): Regenerate if code changes

## Progress Tracking

**After each issue**:
1. Update `IMPLEMENTATION_FIXES_CHECKLIST.md` (check off items)
2. Verify GitHub issue is closed
3. Generate progress query to check remaining issues

**After each phase**:
1. Generate progress report using search queries
2. Post summary in tracking documentation
3. Verify no issues left blocked

## Communication Standards

**Issue comment prefixes**:
- `üìù` - Implementation action
- `‚úèÔ∏è` - File modification
- `‚úÖ` - Success/completion
- `‚ö†Ô∏è` - Warning
- `‚õî` - Blocked/error
- `üìä` - Results/data
- `‚ùì` - Question

**Comment structure**:
```markdown
## [Action]

**Timestamp**: [ISO 8601 UTC]
**Status**: [state]

### Changes Made
- [list]

### Validation
- [x] Step 1: PASSED
- [x] Step 2: PASSED

### Files Modified
- `path/to/file` (lines X-Y)
```

## Anti-Patterns to Avoid

‚ùå Don't work on multiple issues simultaneously  
‚ùå Don't modify code without updating docs  
‚ùå Don't close issues without validation  
‚ùå Don't create manual TODO comments  
‚ùå Don't assume fixes work without testing  
‚ùå Don't commit "WIP" or incomplete work  
‚ùå Don't use generic commit messages  
‚ùå Don't ignore dependencies  

‚úÖ Do complete one issue before starting next  
‚úÖ Do update code and docs together  
‚úÖ Do validate before closing  
‚úÖ Do use GitHub issues for tracking  
‚úÖ Do run validation steps  
‚úÖ Do commit only complete work  
‚úÖ Do write specific commit messages  
‚úÖ Do check blocking issues first  

## Quality Over Speed

- Properly fixed issue > 10 rushed issues
- Thorough validation prevents rework
- Clear documentation saves future time
- Atomic commits enable easy rollback
- Systematic approach avoids mistakes

## Success Criteria

**Individual Issue**:
- Closed with validation complete
- Documentation matches code
- No regressions
- Atomic commits
- GitHub issue documented

**Phase**:
- All phase issues completed/blocked
- Progress report generated
- Documentation synchronized
- Ready for next phase

**Overall**:
- All 35 issues addressed
- Repository publication-ready
- No validity concerns
- Future work documented

---

**Core Principle**: Follow the plan systematically. Read documentation before implementing. Validate thoroughly before closing. Use GitHub MCP for all tracking. Quality over speed.
